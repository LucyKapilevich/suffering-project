library('tidyverse')
library('ggplot2')
library('dplyr')

occdata <- read_csv('occupation_data.csv')
print(occdata)

# Calculate the row-wise mean lifespan
occdata <- occdata |>
    mutate(avg_lifespan = rowMeans(select(occdata, starts_with("Lifespan_")), na.rm = TRUE)) |>
    select(-starts_with("Lifespan_")) |>
    rename('averageLifespan' = 'avg_lifespan')
print(occdata)

ggplot(data = occdata) +
  aes(x = Occupation, y = averageLifespan, fill =averageLifespan)+
  theme_bw()+
  geom_col()+
  geom_vline(xintercept = 70.2)+ #comment do your own average
  labs(
    x = 'Average lifespan per occupation (years)',
    y = 'Occupation',
    fill = 'Average lifespan'
  )